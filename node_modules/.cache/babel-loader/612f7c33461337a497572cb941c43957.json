{"ast":null,"code":"var _jsxFileName = \"D:\\\\KA\\\\HOC HANH\\\\H\\u1ECCC L\\u1EACP TR\\xCCNH 2021\\\\FRONTEND64_20.03-27.09.2021\\\\Buoi33_17.07.2021_React-function\\\\Tro-choi-bai\\\\src\\\\pages\\\\Game\\\\index.jsx\";\nimport React, { Fragment, useEffect, memo } from \"react\";\nimport \"./index.css\";\nimport Controls from \"../../components/Control\";\nimport Main from \"../../components/Main\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getDeckCard } from \"../../redux/actions/cards\";\nimport useStyle from \"../Home/style\";\nimport { typeOfCard } from \"../../redux/actions/types\";\nimport { typeOfPlayer } from \"../../redux/actions/types\";\n\nconst Game = () => {\n  // const [a, setA] = useState(0);\n  //useEffect đại diện cho cả 3 loại lifecycle như trong class: didMount, didUpdate, willUpdate\n  //memo tương tự như pure component trong class (memo sẽ check điều kiện khi nào Game cần render lại thì mới render, tức nêu cha ko có truyền prop cho con/prop ko đổi khi cha render thì memo sẽ xét điều kiện ko ảnh hưởng đến con => con sẽ ko bị render lại)\n  //component didMount, unMounted\n  // useEffect(() => {\n  //   console.log(\"component didMount\");\n  //   return () => {\n  //     console.log(\"component unMounted\"); //phải set trong useEffect có dependency là mảng [], sẽ chạy khi component bị hủy\n  //   };\n  // }, []);\n  //component didUpdated\n  // useEffect(() => {\n  //   console.log(\"component didUpdated\");\n  // }, [a]);\n  //luôn chạy\n  // useEffect(() => {\n  //   console.log(\"always run\");\n  // });\n  //--------------\n  const dispatch = useDispatch();\n  const {\n    player,\n    card\n  } = useSelector(state => state);\n  const classes = useStyle();\n  useEffect(() => {\n    getDeckCard(dispatch);\n  }, []);\n  const winner = player.playerList.reduce((maxPoint, currPlayer) => {\n    if (maxPoint.totalPoint > currPlayer.totalPoint) {\n      return maxPoint;\n    } else {\n      return currPlayer;\n    }\n  });\n\n  const rePlay = () => {\n    const newPlayerList = player.playerList.map(item => ({ ...item,\n      totalPoint: 25000,\n      card: []\n    }));\n    const newCard = { ...card,\n      game: 1,\n      isReveal: false\n    };\n    dispatch({\n      type: typeOfPlayer.SET_PLAYERS,\n      payload: newPlayerList\n    });\n    dispatch({\n      type: typeOfCard.RESET_GAME,\n      payload: newCard\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, card.game > 3 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.title,\n    style: {\n      height: \"100vh\",\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.notification,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      fontWeight: 700\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, \"Ch\\xFAc m\\u1EEBng\"), /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      padding: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, \"ng\\u01B0\\u1EDDi th\\u1EAFng cu\\u1ED9c l\\xE0 \", winner.username, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }), \" v\\u1EDBi t\\u1ED5ng \\u0111i\\u1EC3m sau 5 l\\u01B0\\u1EE3t ch\\u01A1i l\\xE0 \", winner.totalPoint), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-warning btn-lg\",\n    onClick: rePlay,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, \"Ch\\u01A1i l\\u1EA1i\"))) : /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Controls, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Main, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  })));\n};\n\nexport default Game; // export default memo(Game); //giống pure component trong react class ->bọc các component con ko bị render lại khi component cha render lại trong trường hợp con ko bị ảnh hưởng/hoặc các props cha truyền cho con ko ảnh hưởng","map":{"version":3,"sources":["D:/KA/HOC HANH/HỌC LẬP TRÌNH 2021/FRONTEND64_20.03-27.09.2021/Buoi33_17.07.2021_React-function/Tro-choi-bai/src/pages/Game/index.jsx"],"names":["React","Fragment","useEffect","memo","Controls","Main","useDispatch","useSelector","getDeckCard","useStyle","typeOfCard","typeOfPlayer","Game","dispatch","player","card","state","classes","winner","playerList","reduce","maxPoint","currPlayer","totalPoint","rePlay","newPlayerList","map","item","newCard","game","isReveal","type","SET_PLAYERS","payload","RESET_GAME","title","height","textAlign","notification","fontWeight","padding","username"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,IAArC,QAAiD,OAAjD;AACA,OAAO,aAAP;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,OAAOC,QAAP,MAAqB,eAArB;AACA,SAASC,UAAT,QAA2B,2BAA3B;AACA,SAASC,YAAT,QAA6B,2BAA7B;;AAEA,MAAMC,IAAI,GAAG,MAAM;AACjB;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA,QAAMC,QAAQ,GAAGP,WAAW,EAA5B;AACA,QAAM;AAAEQ,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAAmBR,WAAW,CAAES,KAAD,IAAWA,KAAZ,CAApC;AACA,QAAMC,OAAO,GAAGR,QAAQ,EAAxB;AAEAP,EAAAA,SAAS,CAAC,MAAM;AACdM,IAAAA,WAAW,CAACK,QAAD,CAAX;AACD,GAFQ,EAEN,EAFM,CAAT;AAIA,QAAMK,MAAM,GAAGJ,MAAM,CAACK,UAAP,CAAkBC,MAAlB,CAAyB,CAACC,QAAD,EAAWC,UAAX,KAA0B;AAChE,QAAID,QAAQ,CAACE,UAAT,GAAsBD,UAAU,CAACC,UAArC,EAAiD;AAC/C,aAAOF,QAAP;AACD,KAFD,MAEO;AACL,aAAOC,UAAP;AACD;AACF,GANc,CAAf;;AAOA,QAAME,MAAM,GAAG,MAAM;AACnB,UAAMC,aAAa,GAAGX,MAAM,CAACK,UAAP,CAAkBO,GAAlB,CAAuBC,IAAD,KAAW,EACrD,GAAGA,IADkD;AAErDJ,MAAAA,UAAU,EAAE,KAFyC;AAGrDR,MAAAA,IAAI,EAAE;AAH+C,KAAX,CAAtB,CAAtB;AAKA,UAAMa,OAAO,GAAG,EAAE,GAAGb,IAAL;AAAWc,MAAAA,IAAI,EAAE,CAAjB;AAAoBC,MAAAA,QAAQ,EAAE;AAA9B,KAAhB;AACAjB,IAAAA,QAAQ,CAAC;AAAEkB,MAAAA,IAAI,EAAEpB,YAAY,CAACqB,WAArB;AAAkCC,MAAAA,OAAO,EAAER;AAA3C,KAAD,CAAR;AACAZ,IAAAA,QAAQ,CAAC;AAAEkB,MAAAA,IAAI,EAAErB,UAAU,CAACwB,UAAnB;AAA+BD,MAAAA,OAAO,EAAEL;AAAxC,KAAD,CAAR;AACD,GATD;;AAUA,sBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGb,IAAI,CAACc,IAAL,GAAW,CAAX,gBACC;AAAK,IAAA,SAAS,EAAEZ,OAAO,CAACkB,KAAxB;AAA+B,IAAA,KAAK,EAAE;AAAEC,MAAAA,MAAM,EAAE,OAAV;AAAmBC,MAAAA,SAAS,EAAE;AAA9B,KAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAEpB,OAAO,CAACqB,YAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,KAAK,EAAE;AAACC,MAAAA,UAAU,EAAE;AAAb,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,eAEE;AAAI,IAAA,KAAK,EAAE;AAACC,MAAAA,OAAO,EAAE;AAAV,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDACuBtB,MAAM,CAACuB,QAD9B,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,8EAE2CvB,MAAM,CAACK,UAFlD,CAFF,eAME;AAAQ,IAAA,SAAS,EAAC,wBAAlB;AAA2C,IAAA,OAAO,EAAEC,MAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BANF,CADF,CADD,gBAYC,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAbJ,CADF;AAqBD,CArED;;AAuEA,eAAeZ,IAAf,C,CACA","sourcesContent":["import React, { Fragment, useEffect, memo } from \"react\";\r\nimport \"./index.css\";\r\nimport Controls from \"../../components/Control\";\r\nimport Main from \"../../components/Main\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getDeckCard } from \"../../redux/actions/cards\";\r\nimport useStyle from \"../Home/style\";\r\nimport { typeOfCard } from \"../../redux/actions/types\";\r\nimport { typeOfPlayer } from \"../../redux/actions/types\";\r\n\r\nconst Game = () => {\r\n  // const [a, setA] = useState(0);\r\n  //useEffect đại diện cho cả 3 loại lifecycle như trong class: didMount, didUpdate, willUpdate\r\n  //memo tương tự như pure component trong class (memo sẽ check điều kiện khi nào Game cần render lại thì mới render, tức nêu cha ko có truyền prop cho con/prop ko đổi khi cha render thì memo sẽ xét điều kiện ko ảnh hưởng đến con => con sẽ ko bị render lại)\r\n\r\n  //component didMount, unMounted\r\n  // useEffect(() => {\r\n  //   console.log(\"component didMount\");\r\n  //   return () => {\r\n  //     console.log(\"component unMounted\"); //phải set trong useEffect có dependency là mảng [], sẽ chạy khi component bị hủy\r\n  //   };\r\n  // }, []);\r\n  //component didUpdated\r\n  // useEffect(() => {\r\n  //   console.log(\"component didUpdated\");\r\n  // }, [a]);\r\n\r\n  //luôn chạy\r\n  // useEffect(() => {\r\n  //   console.log(\"always run\");\r\n  // });\r\n  //--------------\r\n\r\n  const dispatch = useDispatch();\r\n  const { player, card } = useSelector((state) => state);\r\n  const classes = useStyle();\r\n\r\n  useEffect(() => {\r\n    getDeckCard(dispatch);\r\n  }, []);\r\n\r\n  const winner = player.playerList.reduce((maxPoint, currPlayer) => {\r\n    if (maxPoint.totalPoint > currPlayer.totalPoint) {\r\n      return maxPoint;\r\n    } else {\r\n      return currPlayer;\r\n    }\r\n  });\r\n  const rePlay = () => {\r\n    const newPlayerList = player.playerList.map((item) => ({\r\n      ...item,\r\n      totalPoint: 25000,\r\n      card: []\r\n    }));\r\n    const newCard = { ...card, game: 1, isReveal: false };\r\n    dispatch({ type: typeOfPlayer.SET_PLAYERS, payload: newPlayerList });\r\n    dispatch({ type: typeOfCard.RESET_GAME, payload: newCard });\r\n  };\r\n  return (\r\n    <Fragment>\r\n      {card.game >3 ? (\r\n        <div className={classes.title} style={{ height: \"100vh\", textAlign: 'center' }}>\r\n          <div className={classes.notification}>\r\n            <h1 style={{fontWeight: 700}}>Chúc mừng</h1>\r\n            <h3 style={{padding: 30}}>\r\n              người thắng cuộc là {winner.username}\r\n              <br /> với tổng điểm sau 5 lượt chơi là {winner.totalPoint}\r\n            </h3>\r\n            <button className='btn btn-warning btn-lg' onClick={rePlay}>Chơi lại</button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <Fragment>\r\n          <Controls />\r\n          <Main />\r\n        </Fragment>\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Game;\r\n// export default memo(Game); //giống pure component trong react class ->bọc các component con ko bị render lại khi component cha render lại trong trường hợp con ko bị ảnh hưởng/hoặc các props cha truyền cho con ko ảnh hưởng\r\n"]},"metadata":{},"sourceType":"module"}